---
import PodcastButton from "@/components/astro/podcast-button.astro";
import MobileNav from "@/components/mobile-nav";
import Logo from "@/assets/svgs/logo.svg";
import Wifi from "@/assets/svgs/wifi.svg";
import { Youtube, Instagram } from "lucide-react";
import Typography from "@/components/typography";

const pathname = Astro.url.pathname;
const isHome = pathname === "/";

const navItems = [
  { name: "Home", href: "/" },
  { name: "Episodes", href: "/episodes" },
  { name: "Contact", href: "/contact" },
];
---

<header
  class:list={["w-full", isHome ? "bg-secondary" : "bg-primary-foreground"]}
>
  <div
    class="mx-auto flex h-16 w-full max-w-432.5 items-center justify-between px-4 md:px-8 lg:grid lg:h-28.5 lg:grid-cols-[1fr_auto_1fr] lg:items-center lg:px-6 xl:px-10"
  >
    <!-- Logo -->
    <a href="/" class="flex items-center justify-self-start">
      <Logo />
    </a>

    <!-- Desktop Nav -->
    <nav
      class="hidden items-center justify-self-center lg:flex lg:gap-6 xl:gap-12"
    >
      {
        navItems.map(item => (
          <a
            href={item.href}
            class:list={[
              "relative px-2 py-0.5 transition-opacity hover:opacity-75",
              isHome ? "text-primary-foreground" : "text-secondary",
              {
                "after:absolute after:right-0 after:bottom-0 after:left-0 after:h-0.5 after:bg-current":
                  pathname === item.href,
              },
            ]}
          >
            <Typography tag="span" variant="subtitle">
              {item.name}
            </Typography>
          </a>
        ))
      }
    </nav>

    <!-- Desktop Right -->
    <div
      class="hidden w-full min-w-0 items-center justify-end justify-self-end lg:flex"
    >
      {
        isHome ? (
          <div class="flex items-center gap-4 text-primary-foreground">
            <Wifi fill="currentColor" class="size-6" />
            <Youtube className="size-6" />
            <Instagram className="size-6" />
          </div>
        ) : (
          <div class="flex max-w-full min-w-0 flex-row justify-center gap-2 xl:gap-4">
            <PodcastButton />
            <PodcastButton variant="secondary" />
          </div>
        )
      }
    </div>

    <!-- Mobile Nav (burger + full-screen overlay) -->
    <MobileNav
      client:load
      isHome={isHome}
      pathname={pathname}
      navItems={navItems}
    />
  </div>
</header>

<slot />
